[changelog]
body = """
{% if version %}\
  ## ğŸ’¨ What's new in {{ version | trim_start_matches(pat="v") }} â€” {{ timestamp | date(format="%Y-%m-%d") }}
{% else %}\
  ## ğŸ§ª What's coming next â€” Unreleased
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
  ### {{ group | striptags | trim }}
  {% for commit in commits %}
    - {% if commit.scope %}**{{ commit.scope }}:** {% endif %}{{ commit.message | upper_first }}{% if commit.breaking %} **(BREAKING)**{% endif %} ({{ commit.id | truncate(length=7) }})
  {% endfor %}
{% endfor %}
"""
trim = true
render_always = true

[git]
conventional_commits = true
filter_unconventional = true
require_conventional = false
split_commits = false
protect_breaking_commits = false

# Groupes avec un index en commentaire HTML pour garder un ordre lisible.
commit_parsers = [
    # Toujours en premier
    { body = "BREAKING CHANGE", group = "<!-- 00 -->ğŸ’¥ Breaking Changes" },
    { message = "^feat", group = "<!-- 10 -->âœ¨ Features" },
    { message = "^fix", group = "<!-- 20 -->ğŸ› Bug Fixes" },
    { message = "^(doc|docs)", group = "<!-- 30 -->ğŸ“ Docs" },
    { message = "^perf", group = "<!-- 40 -->ğŸš€ Performance" },
    { message = "^refactor", group = "<!-- 50 -->â™»ï¸ Refactor" },
    { message = "^style", group = "<!-- 60 -->ğŸ¨ Styling" },
    { message = "^test", group = "<!-- 70 -->âœ… Tests" },
    { message = "^ci", group = "<!-- 80 -->ğŸ¤– CI" },
    { message = "^(build|deps)", group = "<!-- 90 -->ğŸ—ï¸ Build" },
    { message = "^revert", group = "<!-- 95 -->â—€ï¸ Revert" },
    # Bruit / divers
    { message = "^chore\\(release\\): prepare for", skip = true },
    { message = "^merge", skip = true },
    { message = ".*", group = "<!-- 99 -->ğŸ“¦ Other" },
]

filter_commits = false
use_branch_tags = false
topo_order = false
topo_order_commits = true
sort_commits = "newest"
recurse_submodules = false
